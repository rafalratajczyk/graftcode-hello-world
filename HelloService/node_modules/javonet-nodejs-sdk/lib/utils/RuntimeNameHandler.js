// @ts-check
import { RuntimeName } from './RuntimeName.js'

/**
 * @typedef {import('../types.d.ts').RuntimeType} RuntimeType
 */

class RuntimeNameHandler {
    /**
     * @param {number} runtimeName
     * @returns {RuntimeType}
     */
    static getName(runtimeName) {
        switch (runtimeName) {
            case RuntimeName.Clr:
                return 'clr'
            case RuntimeName.Go:
                return 'go'
            case RuntimeName.Jvm:
                return 'jvm'
            case RuntimeName.Netcore:
                return 'netcore'
            case RuntimeName.Perl:
                return 'perl'
            case RuntimeName.Python:
                return 'python'
            case RuntimeName.Ruby:
                return 'ruby'
            case RuntimeName.Nodejs:
                return 'nodejs'
            case RuntimeName.Cpp:
                return 'cpp'
            case RuntimeName.Php:
                return 'php'
            case RuntimeName.Python27:
                return 'python27'
            default:
                throw new Error('Invalid runtime name.')
        }
    }

    /**
     * @param {string} name
     * @returns {number}
     */
    static getRuntime = (name) => {
        if (!name || name.trim() === '') {
            throw new Error('Runtime name cannot be null or whitespace.')
        }

        const normalized = name.trim().toLowerCase()

        switch (normalized) {
            case 'clr':
                return RuntimeName.Clr
            case 'go':
                return RuntimeName.Go
            case 'jvm':
                return RuntimeName.Jvm
            case 'netcore':
                return RuntimeName.Netcore
            case 'perl':
                return RuntimeName.Perl
            case 'python':
                return RuntimeName.Python
            case 'ruby':
                return RuntimeName.Ruby
            case 'nodejs':
                return RuntimeName.Nodejs
            case 'php':
                return RuntimeName.Php
            case 'python27':
                return RuntimeName.Python27
            default:
                throw new Error(`${name} is not a supported runtime.`)
        }
    }
}

export { RuntimeNameHandler }
